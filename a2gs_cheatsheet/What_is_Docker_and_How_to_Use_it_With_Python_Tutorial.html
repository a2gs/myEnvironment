<html>
<h1><center><b>What is Docker and How to Use it With Python (Tutorial)</b></center></h1>
<div class="post-card"><!----> <!----> <p class="pt-10"><strong><strong>This is an introductory tutorial on Docker containers. By the end of this article, you will know how to use Docker on your local machine. Along with Python, we are going to run Nginx and Redis containers. Those examples assume that you are familiar with the basic concepts of those technologies. There will be lots of shell examples, so go ahead and open the terminal.</strong></strong></p> <p><p><strong>This is an introductory tutorial on Docker containers. By the end of this article, you will know how to use Docker on your local machine. Along with Python, we are going to run Nginx and Redis containers. Those examples assume that you are familiar with the basic concepts of those technologies. There will be lots of shell examples, so go ahead and open the terminal.</strong></p><h2>What is Docker?</h2><p><a href="https://www.docker.com/" target="_blank">Docker</a>&nbsp;is an open-source tool that automates the deployment of an application inside a software container. The easiest way to grasp the idea behind Docker is to compare it to, well… standard shipping containers.</p><p>Back in the day, transportation companies faced the following challenges:</p><ul><li>How to transport different (incompatible) types of goods side by side (like food and chemicals, or glass and bricks).</li><li>How to handle packages of various sizes using the same vehicle.</li></ul><p>After the introduction of containers, bricks could be put over glass, and chemicals could be stored next to food. Cargo of various sizes can be put inside a standardized container and loaded/unloaded by the same vehicle.</p><p>Let’s go back to&nbsp;<strong>containers in software development</strong>.</p><p>When you develop an application, you need to provide your code along with all possible dependencies like libraries, the web server, databases, etc. You may end up in a situation when the application is working on your computer, but won’t even start on the staging server, or the dev or QA’s machine.</p><p>This challenge can be addressed by isolating the app to make it independent of the system.</p><h2>How does this differ from virtualization?</h2><p>Traditionally, virtual machines were used to avoid this unexpected behavior. The main problem with VM is that an “extra OS” on top of the host operating system adds gigabytes of space to the project. Most of the time your server will host several VMs that will take up even more space. And by the way, at the moment, most cloud-based server providers will charge you for that extra space. Another significant drawback of VM is a slow boot.</p><p>Docker eliminates all the above by simply sharing the OS kernel across all the containers running as separate processes of the host OS.</p><p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qAavsIyJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://djangostars.com/blog/content/images/2018/07/Img-1.png" target="_blank"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qAavsIyJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://djangostars.com/blog/content/images/2018/07/Img-1.png"></a></p><p>Keep in mind that Docker is not the first and not the only containerization platform. However, at the moment Docker is the biggest and the most powerful player on the market.</p><h2>Why do we need Docker?</h2><p>The short list of benefits includes:</p><ul><li>Faster development process</li><li>Handy application encapsulation</li><li>The same behaviour on local machine / dev / staging / production servers</li><li>Easy and clear monitoring</li><li>Easy to scale</li></ul><h1>Faster development process</h1><p>There is no need to install 3rd-party apps like PostgreSQL, Redis, Elasticsearch on the system – you can run it in containers. Docker also gives you the ability to run different versions of same application simultaneously. For example, say you need to do some manual data migration from an older version of Postgres to a newer version. You can have such a situation in microservice architecture when you want to create a new microservice with a new version of the 3rd-party software.</p><p>It could be quite complex to keep two different versions of the same app on one host OS. In this case, Docker containers could be a perfect solution – you receive isolated environments for your applications and 3rd-parties.</p><h1>Handy application encapsulation</h1><p>You can deliver your application in one piece. Most programming languages, frameworks and all operating systems have their own packaging managers. And even if your application can be packed with its native package manager, it could be hard to create a port for another system.</p><p>Docker gives you a unified image format to distribute you applications across different host systems and cloud services. You can deliver your application in one piece with all the required dependencies (included in an image) ready to run.</p><h1>Same behaviour on local machine / dev / staging / production servers</h1><p>Docker can’t guarantee 100% dev / staging / production parity, because there is always the human factor. But it reduces to almost zero the probability of error caused by different versions of operating systems, system-dependencies, etc.</p><p>With right approach to building Docker images, your application will use the same base image with the same OS version and the required dependencies.</p><h1>Easy and clear monitoring</h1><p>Out of the box, you have a unified way to read log files from all running containers. You don’t need to remember all the specific paths where your app and its dependencies store log files and write custom hooks to handle this.</p><p>You can integrate an&nbsp;<a href="https://docs.docker.com/config/containers/logging/configure/#supported-logging-drivers" target="_blank">external logging driver</a>&nbsp;and monitor your app log files in one place.</p><h1>Easy to scale</h1><p>A correctly wrapped application will cover most of the&nbsp;<a href="https://12factor.net/" target="_blank">Twelve Factors</a>. By design, Docker forces you follow its core principles, such as configuration over environment variables, communication over TCP/UDP ports, etc. And if you’ve done your application right, it will be ready for scaling not only in Docker.</p><h1>Supported platforms</h1><p>Docker’s native platform is Linux, as it’s based on features provided by the Linux kernel. However, you can still run it on macOS and Windows. The only difference is that on macOS and Windows, Docker is encapsulated into a tiny virtual machine. At the moment, Docker for macOS and Windows has reached a significant level of usability and feels more like a native app.</p><h1>Installation</h1><p>You can check out the installation instructions for Docker&nbsp;<a href="https://docs.docker.com/install/" target="_blank">here</a>.</p><p>If you’re running Docker on Linux, you need to run all the following commands as root or add your user to docker group and re-login:</p><pre class="ql-syntax" spellcheck="false">sudo usermod -aG docker <span class="hljs-constructor">$(<span class="hljs-params">whoami</span>)</span>`

</pre><h1>Terminology</h1><ul><li><strong>Container</strong>&nbsp;– a running instance that encapsulates required software. Containers are always created from images. A container can expose ports and volumes to interact with other containers or/and the outer world. Containers can be easily killed / removed and re-created again in a very short time. Containers don’t keep state.</li><li><strong>Image</strong>&nbsp;– the basic element for every container. When you create an image, every step is cached and can be reused (<a href="https://en.wikipedia.org/wiki/Copy-on-write" target="_blank">Copy On Write model</a>). Depending on the image, it can take some time to build. Containers, on the other hand, can be started from images right away.</li><li><strong>Port</strong>&nbsp;– a TCP/UDP port in its original meaning. To keep things simple, let’s assume that ports can be exposed to the outer world (accessible from the host OS) or connected to other containers – i.e., accessible only from those containers and invisible to the outer world.</li><li><strong>Volume</strong>&nbsp;– can be described as a shared folder. Volumes are initialized when a container is created. Volumes are designed to persist data, independent of the container’s lifecycle.</li><li><strong>Registry</strong>&nbsp;– the server that stores Docker images. It can be compared to Github – you can pull an image from the registry to deploy it locally, and push locally built images to the registry.</li><li><a href="https://hub.docker.com/explore/" target="_blank"><strong>Docker Hub</strong></a>&nbsp;– a registry with web interface provided by Docker Inc. It stores a lot of Docker images with different software. Docker Hub is a source of the “official” Docker images made by the Docker team or in cooperation with the original software manufacturer (it doesn’t necessary mean that these “original” images are from official software manufacturers). Official images list their potential vulnerabilities. This information is available to any logged-in user. There are both free and paid accounts available. You can have one private image per account and an infinite amount of public images for free.&nbsp;<a href="https://store.docker.com/search?type=image&amp;source=verified" target="_blank"><strong>Docker Store</strong></a>&nbsp;– a service very similar to Docker Hub. It’s a marketplace with ratings, reviews, etc. My personal opinion is that it’s marketing stuff. I’m totally happy with Docker Hub.</li></ul><p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Vw1r4KBJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://djangostars.com/blog/content/images/2017/03/docker-vulnera.png" target="_blank"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Vw1r4KBJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://djangostars.com/blog/content/images/2017/03/docker-vulnera.png"></a></p><h2>Example 1: hello world</h2><p>It’s time to run your first container:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-keyword">run</span><span class="bash"> ubuntu /bin/<span class="hljs-built_in">echo</span> <span class="hljs-string">'Hello world'</span>
</span>
</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false">Unable to find image <span class="hljs-string">'ubuntu:latest'</span> locally
<span class="hljs-string">latest:</span> Pulling from library/ubuntu
<span class="hljs-number">6</span><span class="hljs-string">b98dfc16071:</span> Pull complete
<span class="hljs-number">4001</span><span class="hljs-string">a1209541:</span> Pull complete
<span class="hljs-number">6319</span><span class="hljs-string">fc68c576:</span> Pull complete
<span class="hljs-string">b24603670dc3:</span> Pull complete
<span class="hljs-number">97</span><span class="hljs-string">f170c87c6f:</span> Pull complete
<span class="hljs-string">Digest:</span><span class="hljs-string">sha256:</span><span class="hljs-number">5</span>f4bdc3467537cbbe563e80db2c3ec95d548a9145d64453b06939c4592d67b6d
<span class="hljs-string">Status:</span> Downloaded newer image <span class="hljs-keyword">for</span> <span class="hljs-string">ubuntu:</span>latest
Hello world

</pre><ul><li><strong>docker run</strong>&nbsp;is a command to run a container.</li><li><strong>ubuntu</strong>&nbsp;is the image you run. For example, the Ubuntu operating system image. When you specify an image, Docker looks first for the image on your Docker host. If the image does not exist locally, then the image is pulled from the public image registry – Docker Hub.</li><li><strong>/bin/echo ‘Hello world’</strong>&nbsp;is the command that will run inside a new container. This container simply prints “Hello world” and stops the execution.</li></ul><p>Let’s try to create an interactive shell inside a Docker container:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-built_in">run</span> -i -t <span class="hljs-comment">--rm ubuntu /bin/bash</span>

</pre><ul><li><strong>-t</strong>&nbsp;flag assigns a pseudo-tty or terminal inside the new container.</li><li><strong>-i</strong>&nbsp;flag allows you to make an interactive connection by grabbing the standard input (STDIN) of the container.</li><li><strong>–rm</strong>&nbsp;flag automatically removes the container when the process exits. By default, containers are not deleted. This container exists until we keep the shell session and terminates when we exit the session (like an SSH session with a remote server).</li></ul><p>If you want to keep the container running after the end of the session, you need to daemonize it:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-keyword">run</span><span class="bash"> --name daemon -d ubuntu /bin/sh -c <span class="hljs-string">"while true; do echo hello world; sleep 1; done"</span>
</span>
</pre><ul><li><strong>–name daemon</strong>&nbsp;assigns daemon name to a new container. If you don’t specify a name explicitly, Docker will generate and assign it automatically.</li><li><strong>-d</strong>&nbsp;flag runs the container in the background (i.e., daemonizes it).</li></ul><p>Let’s see what containers we have at the moment:</p><pre class="ql-syntax" spellcheck="false">docker ps -<span class="hljs-selector-tag">a</span>

</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false">CONTAINER ID  IMAGE   COMMAND                 CREATED             STATUS                         PORTS  NAMES
<span class="hljs-number">1</span>fc8cee64ec2  ubuntu  <span class="hljs-string">"/bin/sh -c 'while..."</span>  <span class="hljs-number">32</span> <span class="hljs-built_in">seconds</span> ago      Up <span class="hljs-number">30</span> <span class="hljs-built_in">seconds</span>                         daemon
c006f1a02edf  ubuntu  <span class="hljs-string">"/bin/echo 'Hello ..."</span>  About <span class="hljs-keyword">a</span> minute ago  Exited (<span class="hljs-number">0</span>) About <span class="hljs-keyword">a</span> minute ago         gifted_nobel

</pre><ul><li><strong>docker ps</strong>&nbsp;is a command to list containers.</li><li><strong>-a</strong>&nbsp;shows all containers (without -a flag ps will show only running containers).</li></ul><p>The ps shows us that we have two containers:</p><ul><li><strong>gifted_nobel</strong>&nbsp;(the name for this container was generated automatically – it will be different on your machine). It’s the first container we created, the one that printed ‘Hello world’ once.</li><li><strong>daemon</strong>&nbsp;– the third container we created, which runs as a daemon.</li></ul><p><strong>Note:</strong>&nbsp;there is no second container (the one with interactive shell) because we set the&nbsp;<strong>–rm option</strong>. As a result, this container is automatically deleted right after execution.</p><p>Let’s check the logs and see what the daemon container is doing right now:</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">docker logs -f daemon</span>

</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-attr">...</span>
<span class="hljs-attr">hello</span> <span class="hljs-string">world</span>
<span class="hljs-attr">hello</span> <span class="hljs-string">world</span>
<span class="hljs-attr">hello</span> <span class="hljs-string">world</span>

</pre><ul><li><strong>docker logs</strong>&nbsp;fetch the logs of a container.</li><li><strong>-f</strong>&nbsp;flag to follow the log output (works actually like&nbsp;<strong>tail -f</strong>).</li></ul><p>Now let’s stop the daemon container:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-built_in">stop</span> daemon

</pre><p>Make sure the container has stopped.</p><pre class="ql-syntax" spellcheck="false">docker ps -<span class="hljs-selector-tag">a</span>

</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false">CONTAINER ID  IMAGE   COMMAND                 CREATED        STATUS                      PORTS  NAMES
<span class="hljs-number">1</span>fc8cee64ec2  ubuntu  <span class="hljs-string">"/bin/sh -c 'while..."</span>  <span class="hljs-number">5</span> minutes ago  Exited (<span class="hljs-number">137</span>) <span class="hljs-number">5</span> seconds ago         daemon
c006f1a02edf  ubuntu  <span class="hljs-string">"/bin/echo 'Hello ..."</span>  <span class="hljs-number">6</span> minutes ago  Exited (<span class="hljs-number">0</span>) <span class="hljs-number">6</span> minutes ago           gifted_nobel

</pre><p>The container is stopped. We can start it again:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-literal">start</span> daemon

</pre><p>Let’s ensure that it’s running:</p><pre class="ql-syntax" spellcheck="false">docker ps -<span class="hljs-selector-tag">a</span>

</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false">CONTAINER ID  IMAGE   COMMAND                 CREATED        STATUS                    PORTS  NAMES
<span class="hljs-number">1</span>fc8cee64ec2  ubuntu  <span class="hljs-string">"/bin/sh -c 'while..."</span>  <span class="hljs-number">5</span> minutes ago  Up <span class="hljs-number">3</span> seconds                     daemon
c006f1a02edf  ubuntu  <span class="hljs-string">"/bin/echo 'Hello ..."</span>  <span class="hljs-number">6</span> minutes ago  Exited (<span class="hljs-number">0</span>) <span class="hljs-number">7</span> minutes ago         gifted_nobel

</pre><p>Now, stop it again and remove all the containers manually:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-keyword">stop</span> daemon
docker rm &lt;your <span class="hljs-keyword">first</span> <span class="hljs-keyword">container</span> <span class="hljs-keyword">name</span>&gt;
docker rm daemon

</pre><p>To remove all containers, we can use the following command:</p><pre class="ql-syntax" spellcheck="false">docker rm -f <span class="hljs-constructor">$(<span class="hljs-params">docker</span> <span class="hljs-params">ps</span> -<span class="hljs-params">aq</span>)</span>

</pre><ul><li><strong>docker rm</strong>&nbsp;is the command to remove the container.</li><li><strong>-f</strong>&nbsp;flag (for rm) stops the container if it’s running (i.e., force deletion).</li><li><strong>-q</strong>&nbsp;flag (for ps) is to print only container IDs.</li></ul><h2>Example 2: Environment variables and volumes</h2><p>Starting from this example, you’ll need several additional files you can find on my&nbsp;<a href="https://github.com/alexryabtsev/docker-workshop/" target="_blank">GitHub repo</a>. You can clone my repo or simply use the&nbsp;<a href="https://github.com/alexryabtsev/docker-workshop/archive/master.zip" target="_blank">following link</a>&nbsp;to download the sample files.</p><p>It’s time to create and run more a meaningful container, like&nbsp;<strong>Nginx</strong>.</p><p>Change the directory to&nbsp;<strong>examples/nginx</strong>:</p><pre class="ql-syntax" spellcheck="false">docker run -d --name <span class="hljs-string">"test-nginx"</span> -p <span class="hljs-number">8080</span><span class="hljs-symbol">:</span><span class="hljs-number">80</span> -v <span class="hljs-variable">$(</span>pwd)<span class="hljs-symbol">:/usr/share/nginx/html</span><span class="hljs-symbol">:ro</span> <span class="hljs-symbol">nginx:</span>latest

</pre><p><strong>Warning</strong>: This command looks quite heavy, but it’s just an example to explain volumes and env variables. In 99% of real-life cases, you won’t start Docker containers manually – you’ll use orchestration services (we’ll cover&nbsp;<a href="https://docs.docker.com/compose/overview/" target="_blank">docker-compose</a>&nbsp;in&nbsp;<a href="https://github.com/alexryabtsev/docker-workshop#example-4-connection-between-containers" target="_blank">example #4</a>) or write a custom script to do it.</p><p>Console output:</p><pre class="ql-syntax" spellcheck="false">Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">find</span> image <span class="hljs-string">'nginx:latest'</span> locally
lates<span class="hljs-variable">t:</span> Pulling from library/nginx
<span class="hljs-number">683</span>abbb4ea60: Pull <span class="hljs-built_in">complete</span>
a470862432e2: Pull <span class="hljs-built_in">complete</span>
<span class="hljs-number">977375</span>e58a31: Pull <span class="hljs-built_in">complete</span>
Diges<span class="hljs-variable">t:</span> <span class="hljs-built_in">sha256</span>:a65beb8c90a08b22a9ff6a219c2f363e16c477b6d610da28fe9cba37c2c3a2ac
Statu<span class="hljs-variable">s:</span> Downloaded newer image <span class="hljs-keyword">for</span> nginx:latest
afa095a8b81960241ee92ecb9aa689f78d201cff2469895674cec2c2acdcc61c

</pre><ul><li><strong>-p</strong>&nbsp;is a ports mapping HOST PORT:CONTAINER PORT.</li><li><strong>-v</strong>&nbsp;is a volume mounting HOST DIRECTORY:CONTAINER DIRECTORY.</li></ul><p><strong>Important</strong>: run command accepts only absolute paths. In our example, we’ve used&nbsp;<strong>$(pwd)</strong>&nbsp;to set the current directory absolute path.</p><p>Now check this&nbsp;<a href="http://127.0.0.1:8080/" target="_blank">url</a>&nbsp;in your web browser.</p><p>We can try to change&nbsp;<strong>/example/nginx/index.html</strong>&nbsp;(which is mounted as a volume to&nbsp;<strong>/usr/share/nginx/html</strong>&nbsp;directory inside the container) and refresh the page.</p><p>Let’s get the information about the&nbsp;<strong>test-nginx</strong>&nbsp;container:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-keyword">inspect</span> <span class="hljs-keyword">test</span>-nginx

</pre><p>This command displays system-wide information about the Docker installation. This information includes the kernel version, number of containers and images, exposed ports, mounted volumes, etc.</p><h2>Example 3: Writing your first Dockerfile</h2><p>To build a Docker image, you need to create a Dockerfile. It is a plain text file with instructions and arguments. Here is the description of the instructions we’re going to use in our next example:</p><ul><li><strong>FROM</strong>&nbsp;– set base image</li><li><strong>RUN</strong>&nbsp;– execute command in container</li><li><strong>ENV</strong>&nbsp;– set environment variable</li><li><strong>WORKDIR</strong>&nbsp;– set working directory</li><li><strong>VOLUME</strong>&nbsp;– create mount-point for a volume</li><li><strong>CMD</strong>&nbsp;– set executable for container</li></ul><p>You can check&nbsp;<a href="https://docs.docker.com/engine/reference/builder/" target="_blank">Dockerfile reference</a>&nbsp;for more details.</p><p>Let’s create an image that will get the contents of the website with&nbsp;<strong>curl</strong>&nbsp;and store it to the text file. We need to pass the website url via the environment variable&nbsp;<strong>SITE_URL</strong>. The resulting file will be placed in a directory, mounted as a volume.</p><p>Place the file name&nbsp;<strong>Dockerfile</strong>&nbsp;in&nbsp;<strong>examples/curl</strong>&nbsp;directory with the following contents:</p><pre class="ql-syntax" spellcheck="false">FROM <span class="hljs-symbol">ubuntu:</span>latest
RUN apt-get update \
    &amp;&amp; apt-get install --no-install-recommends --no-install-suggests -y curl \
    &amp;&amp; rm -rf /var/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">apt</span>/<span class="hljs-title">lists</span>/*</span>
ENV SITE_URL <span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/example.com/</span>
WORKDIR /data
VOLUME /data
CMD sh -c <span class="hljs-string">"curl -Lk $SITE_URL &gt; /data/results"</span>

</pre><p>Dockerfile is ready. It’s time to build the actual image.</p><p>Go to&nbsp;<strong>examples/curl</strong>&nbsp;directory and execute the following command to build an image:</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-symbol">docker</span> <span class="hljs-keyword">build </span>. -t test-curl

</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false">Sending build context to Docker daemon  3.584kB
Step 1/6 : FROM ubuntu:latest
 <span class="hljs-comment">---&gt; 113a43faa138</span>
Step 2/6 : RUN apt-get <span class="hljs-keyword">update</span>     &amp;&amp; apt-<span class="hljs-keyword">get</span> <span class="hljs-keyword">install</span> <span class="hljs-comment">--no-install-recommends --no-install-suggests -y curl     &amp;&amp; rm -rf /var/lib/apt/lists/*</span>
 <span class="hljs-comment">---&gt; Running in ccc047efe3c7</span>
<span class="hljs-keyword">Get</span>:<span class="hljs-number">1</span> <span class="hljs-keyword">http</span>://archive.ubuntu.com/ubuntu bionic InRelease [<span class="hljs-number">242</span> kB]
<span class="hljs-keyword">Get</span>:<span class="hljs-number">2</span> <span class="hljs-keyword">http</span>://security.ubuntu.com/ubuntu bionic-<span class="hljs-keyword">security</span> InRelease [<span class="hljs-number">83.2</span> kB]
...
Removing intermediate <span class="hljs-keyword">container</span> ccc047efe3c7
 <span class="hljs-comment">---&gt; 8d10d8dd4e2d</span>
Step <span class="hljs-number">3</span>/<span class="hljs-number">6</span> : ENV SITE_URL <span class="hljs-keyword">http</span>://example.com/
 <span class="hljs-comment">---&gt; Running in 7688364ef33f</span>
Removing intermediate <span class="hljs-keyword">container</span> <span class="hljs-number">7688364</span>ef33f
 <span class="hljs-comment">---&gt; c71f04bdf39d</span>
Step <span class="hljs-number">4</span>/<span class="hljs-number">6</span> : WORKDIR /<span class="hljs-keyword">data</span>
Removing intermediate <span class="hljs-keyword">container</span> <span class="hljs-number">96</span>b1b6817779
 <span class="hljs-comment">---&gt; 1ee38cca19a5</span>
Step <span class="hljs-number">5</span>/<span class="hljs-number">6</span> : VOLUME /<span class="hljs-keyword">data</span>
 <span class="hljs-comment">---&gt; Running in ce2c3f68dbbb</span>
Removing intermediate <span class="hljs-keyword">container</span> ce2c3f68dbbb
 <span class="hljs-comment">---&gt; f499e78756be</span>
Step <span class="hljs-number">6</span>/<span class="hljs-number">6</span> : CMD sh -c <span class="hljs-string">"curl -Lk $SITE_URL &gt; /data/results"</span>
 <span class="hljs-comment">---&gt; Running in 834589c1ac03</span>
Removing intermediate <span class="hljs-keyword">container</span> <span class="hljs-number">834589</span>c1ac03
 <span class="hljs-comment">---&gt; 4b79e12b5c1d</span>
Successfully built <span class="hljs-number">4</span>b79e12b5c1d
Successfully tagged <span class="hljs-keyword">test</span>-curl:latest

</pre><ul><li><strong>docker build</strong>&nbsp;command builds a new image locally.</li><li><strong>-t</strong>&nbsp;flag sets the name tag to an image.</li></ul><p>Now we have the new image, and we can see it in the list of existing images:</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">docker images</span>

</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false">REPOSITORY  TAG     IMAGE ID      CREATED         SIZE
test-curl   latest  <span class="hljs-number">5</span>ebb2a65d771  <span class="hljs-number">37</span> minutes ago  <span class="hljs-number">180</span> MB
nginx       latest  <span class="hljs-number">6</span>b914bbcb89e  <span class="hljs-number">7</span> days ago      <span class="hljs-number">182</span> MB
ubuntu      latest  <span class="hljs-number">0</span>ef2e08ed3fa  <span class="hljs-number">8</span> days ago      <span class="hljs-number">130</span> MB

</pre><p>We can create and run the container from the image. Let’s try it with the default parameters:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-keyword">run</span><span class="bash"> --rm -v $(<span class="hljs-built_in">pwd</span>)/vol:/data/:rw <span class="hljs-built_in">test</span>-curl
</span>
</pre><p>To see the results saved to file, run:</p><pre class="ql-syntax" spellcheck="false">cat .<span class="hljs-regexp">/vol/</span>results

</pre><p>Let’s try with&nbsp;<a href="http://facebook.com/" target="_blank">Facebook.com</a>:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-keyword">run</span><span class="bash"> --rm -e SITE_URL=https://facebook.com/ -v $(<span class="hljs-built_in">pwd</span>)/vol:/data/:rw <span class="hljs-built_in">test</span>-curl
</span>
</pre><p>To see the results saved to file, run:</p><pre class="ql-syntax" spellcheck="false">cat .<span class="hljs-regexp">/vol/</span>results

</pre><h1>What Best practices for creating images</h1><ul><li>Include only&nbsp;<strong>necessary context</strong>&nbsp;– use a&nbsp;<a href="https://docs.docker.com/engine/reference/builder/#dockerignore-file" target="_blank"><strong>.dockerignore</strong></a>&nbsp;file (like .gitignore in git)</li><li>Avoid installing&nbsp;<strong>unnecessary packages</strong>&nbsp;– it will consume extra disk space.</li><li><strong>Use cache</strong>. Add context that changes a lot (for example, the source code of your project) at the end of Dockerfile – it will utilize Docker cache effectively.</li><li><strong>Be careful with volumes</strong>. You should remember what data is in volumes. Because volumes are persistent and don’t die with the containers, the next container will use data from the volume created by the previous container.</li><li>Use&nbsp;<a href="https://docs.docker.com/engine/reference/builder/#environment-replacement" target="_blank"><strong>environment variables</strong></a>&nbsp;(in RUN, EXPOSE, VOLUME). It will make your Dockerfile more flexible.</li></ul><h1>Alpine images</h1><p>A lot of Docker images (versions of images) are created on top of&nbsp;<a href="https://alpinelinux.org/" target="_blank"><strong>Alpine Linux</strong></a>&nbsp;– this is a lightweight distro that allows you to reduce the overall size of Docker images.</p><p>I recommend that you use images based on Alpine for third-party services, such as Redis, Postgres, etc. For your app images, use images based on&nbsp;<a href="https://hub.docker.com/_/buildpack-deps/" target="_blank"><strong>buildpack</strong></a>&nbsp;– it will be easy to debug inside the container, and you’ll have a lot of pre-installed system-wide requirements.</p><p>Only you can decide which base image to use, but you can get the maximum benefit by using one basic image for all images, because in this case the cache will be used more effectively.</p><h2>Example 4: Connection between containers</h2><p><a href="https://docs.docker.com/compose/overview/" target="_blank"><strong>Docker compose</strong></a>&nbsp;– is an CLI utility used to connect containers with each other.</p><p>You can install docker-compose&nbsp;<a href="https://pypi.org/project/docker-compose/" target="_blank">via pip</a>:</p><pre class="ql-syntax" spellcheck="false">sudo pip <span class="hljs-keyword">install</span> docker-compose

</pre><p>In this example, I am going to connect Python and Redis containers.</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.6'</span>
<span class="hljs-attr">services:</span>
<span class="hljs-attr">  app:</span>
<span class="hljs-attr">    build:</span>
<span class="hljs-attr">      context:</span> <span class="hljs-string">./app</span>
<span class="hljs-attr">    depends_on:</span>
<span class="hljs-bullet">      -</span> <span class="hljs-string">redis</span>
<span class="hljs-attr">    environment:</span>
<span class="hljs-bullet">      -</span> <span class="hljs-string">REDIS_HOST=redis</span>
<span class="hljs-attr">    ports:</span>
<span class="hljs-bullet">      -</span> <span class="hljs-string">"5000:5000"</span>
<span class="hljs-attr">  redis:</span>
<span class="hljs-attr">    image:</span> <span class="hljs-attr">redis:3.2-alpine</span>
<span class="hljs-attr">    volumes:</span>
<span class="hljs-attr">      - redis_data:</span><span class="hljs-string">/data</span>
<span class="hljs-attr">volumes:</span>
<span class="hljs-attr">  redis_data:</span>

</pre><p>Go to&nbsp;<strong>examples/compose</strong>&nbsp;and execute the following command:</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">docker-compose up</span>

</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false">Building app
<span class="hljs-keyword">Step</span> <span class="hljs-number">1</span>/<span class="hljs-number">9</span> : FROM python:<span class="hljs-number">3.6</span><span class="hljs-number">.3</span>
<span class="hljs-number">3.6</span><span class="hljs-number">.3</span>: Pulling from library/python
f49cf87b52c1: Pull complete
<span class="hljs-number">7</span>b491c575b06: Pull complete
b313b08bab3b: Pull complete
<span class="hljs-number">51</span>d6678c3f0e: Pull complete
<span class="hljs-number">09</span>f35bd58db2: Pull complete
<span class="hljs-number">1</span>bda3d37eead: Pull complete
<span class="hljs-number">9</span>f47966d4de2: Pull complete
<span class="hljs-number">9</span>fd775bfe531: Pull complete
Digest: sha256:cdef88d8625cf50ca705b7abfe99e8eb33b889652a9389b017eb46a6d2f1aaf3
Status: Downloaded newer image <span class="hljs-keyword">for</span> python:<span class="hljs-number">3.6</span><span class="hljs-number">.3</span>
 ---&gt; a8f7167de312
<span class="hljs-keyword">Step</span> <span class="hljs-number">2</span>/<span class="hljs-number">9</span> : ENV BIND_PORT <span class="hljs-number">5000</span>
 ---&gt; Running <span class="hljs-built_in">in</span> <span class="hljs-number">3</span>b6fe5ca226d
Removing intermediate container <span class="hljs-number">3</span>b6fe5ca226d
 ---&gt; <span class="hljs-number">0</span>b84340fa920
<span class="hljs-keyword">Step</span> <span class="hljs-number">3</span>/<span class="hljs-number">9</span> : ENV REDIS_HOST localhost
 ---&gt; Running <span class="hljs-built_in">in</span> a4f9a1d6f541
Removing intermediate container a4f9a1d6f541
 ---&gt; ebe63bf5959e
<span class="hljs-keyword">Step</span> <span class="hljs-number">4</span>/<span class="hljs-number">9</span> : ENV REDIS_PORT <span class="hljs-number">6379</span>
 ---&gt; Running <span class="hljs-built_in">in</span> fd06aa65fd33
Removing intermediate container fd06aa65fd33
 ---&gt; <span class="hljs-number">2</span>a581c31ff4f
<span class="hljs-keyword">Step</span> <span class="hljs-number">5</span>/<span class="hljs-number">9</span> : COPY ./requirements.txt /requirements.txt
 ---&gt; <span class="hljs-number">671093</span>a12829
<span class="hljs-keyword">Step</span> <span class="hljs-number">6</span>/<span class="hljs-number">9</span> : RUN pip install -r /requirements.txt
 ---&gt; Running <span class="hljs-built_in">in</span> b8ea53bc6ba6
Collecting flask==<span class="hljs-number">1.0</span><span class="hljs-number">.2</span> (from -r /requirements.txt (line <span class="hljs-number">1</span>))
  Downloading https://files.pythonhosted.org/packages/<span class="hljs-number">7</span>f/e7/<span class="hljs-number">08578774</span>ed4536d3242b14dacb4696386634607af824ea997202cd0edb4b/Flask<span class="hljs-number">-1.0</span><span class="hljs-number">.2</span>-py2.py3-none-any.whl (<span class="hljs-number">91</span>kB)
Collecting redis==<span class="hljs-number">2.10</span><span class="hljs-number">.6</span> (from -r /requirements.txt (line <span class="hljs-number">2</span>))
  Downloading https://files.pythonhosted.org/packages/<span class="hljs-number">3</span>b/f6/<span class="hljs-number">7</span>a76333cf0b9251ecf49efff635015171843d9b977e4ffcf59f9c4428052/redis<span class="hljs-number">-2.10</span><span class="hljs-number">.6</span>-py2.py3-none-any.whl (<span class="hljs-number">64</span>kB)
Collecting click&gt;=<span class="hljs-number">5.1</span> (from flask==<span class="hljs-number">1.0</span><span class="hljs-number">.2</span>-&gt;-r /requirements.txt (line <span class="hljs-number">1</span>))
  Downloading https://files.pythonhosted.org/packages/<span class="hljs-number">34</span>/c1/<span class="hljs-number">8806</span>f99713ddb993c5366c362b2f908f18269f8d792aff1abfd700775a77/click<span class="hljs-number">-6.7</span>-py2.py3-none-any.whl (<span class="hljs-number">71</span>kB)
Collecting Jinja2&gt;=<span class="hljs-number">2.10</span> (from flask==<span class="hljs-number">1.0</span><span class="hljs-number">.2</span>-&gt;-r /requirements.txt (line <span class="hljs-number">1</span>))
  Downloading https://files.pythonhosted.org/packages/<span class="hljs-number">7</span>f/ff/ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731/Jinja2<span class="hljs-number">-2.10</span>-py2.py3-none-any.whl (<span class="hljs-number">126</span>kB)
Collecting itsdangerous&gt;=<span class="hljs-number">0.24</span> (from flask==<span class="hljs-number">1.0</span><span class="hljs-number">.2</span>-&gt;-r /requirements.txt (line <span class="hljs-number">1</span>))
  Downloading https://files.pythonhosted.org/packages/dc/b4/a60bcdba945c00f6d608d8975131ab3f25b22f2bcfe1dab221165194b2d4/itsdangerous<span class="hljs-number">-0.24</span>.tar.gz (<span class="hljs-number">46</span>kB)
Collecting Werkzeug&gt;=<span class="hljs-number">0.14</span> (from flask==<span class="hljs-number">1.0</span><span class="hljs-number">.2</span>-&gt;-r /requirements.txt (line <span class="hljs-number">1</span>))
  Downloading https://files.pythonhosted.org/packages/<span class="hljs-number">20</span>/c4/<span class="hljs-number">12e3</span>e56473e52375aa29c4764e70d1b8f3efa6682bef8d0aae04fe335243/Werkzeug<span class="hljs-number">-0.14</span><span class="hljs-number">.1</span>-py2.py3-none-any.whl (<span class="hljs-number">322</span>kB)
Collecting MarkupSafe&gt;=<span class="hljs-number">0.23</span> (from Jinja2&gt;=<span class="hljs-number">2.10</span>-&gt;flask==<span class="hljs-number">1.0</span><span class="hljs-number">.2</span>-&gt;-r /requirements.txt (line <span class="hljs-number">1</span>))
  Downloading https://files.pythonhosted.org/packages/<span class="hljs-number">4</span>d/de/<span class="hljs-number">32</span>d741db316d8fdb7680822dd37001ef7a448255de9699ab4bfcbdf4172b/MarkupSafe<span class="hljs-number">-1.0</span>.tar.gz
Building wheels <span class="hljs-keyword">for</span> collected packages: itsdangerous, MarkupSafe
  Running setup.py bdist_wheel <span class="hljs-keyword">for</span> itsdangerous: started
  Running setup.py bdist_wheel <span class="hljs-keyword">for</span> itsdangerous: finished <span class="hljs-built_in">with</span> status 'done'
  Stored <span class="hljs-built_in">in</span> directory: /root/.cache/pip/wheels/<span class="hljs-number">2</span>c/<span class="hljs-number">4</span>a/<span class="hljs-number">61</span>/<span class="hljs-number">5599631</span>c1554768c6290b08c02c72d7317910374ca602ff1e5
  Running setup.py bdist_wheel <span class="hljs-keyword">for</span> MarkupSafe: started
  Running setup.py bdist_wheel <span class="hljs-keyword">for</span> MarkupSafe: finished <span class="hljs-built_in">with</span> status 'done'
  Stored <span class="hljs-built_in">in</span> directory: /root/.cache/pip/wheels/<span class="hljs-number">33</span>/<span class="hljs-number">56</span>/<span class="hljs-number">20</span>/ebe49a5c612fffe1c5a632146b16596f9e64676768661e4e46
Successfully built itsdangerous MarkupSafe
Installing collected packages: click, MarkupSafe, Jinja2, itsdangerous, Werkzeug, flask, redis
Successfully installed Jinja2<span class="hljs-number">-2.10</span> MarkupSafe<span class="hljs-number">-1.0</span> Werkzeug<span class="hljs-number">-0.14</span><span class="hljs-number">.1</span> click<span class="hljs-number">-6.7</span> flask<span class="hljs-number">-1.0</span><span class="hljs-number">.2</span> itsdangerous<span class="hljs-number">-0.24</span> redis<span class="hljs-number">-2.10</span><span class="hljs-number">.6</span>
You are <span class="hljs-built_in">using</span> pip version <span class="hljs-number">9.0</span><span class="hljs-number">.1</span>, however version <span class="hljs-number">10.0</span><span class="hljs-number">.1</span> is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
Removing intermediate container b8ea53bc6ba6
 ---&gt; <span class="hljs-number">3117</span>d3927951
<span class="hljs-keyword">Step</span> <span class="hljs-number">7</span>/<span class="hljs-number">9</span> : COPY ./app.py /app.py
 ---&gt; <span class="hljs-number">84</span>a82fa91773
<span class="hljs-keyword">Step</span> <span class="hljs-number">8</span>/<span class="hljs-number">9</span> : EXPOSE $BIND_PORT
 ---&gt; Running <span class="hljs-built_in">in</span> <span class="hljs-number">8e259617</span>b7b5
Removing intermediate container <span class="hljs-number">8e259617</span>b7b5
 ---&gt; <span class="hljs-number">55</span>f447f498dd
<span class="hljs-keyword">Step</span> <span class="hljs-number">9</span>/<span class="hljs-number">9</span> : CMD [ <span class="hljs-string">"python"</span>, <span class="hljs-string">"/app.py"</span> ]
 ---&gt; Running <span class="hljs-built_in">in</span> <span class="hljs-number">2</span>ade293ecb25
Removing intermediate container <span class="hljs-number">2</span>ade293ecb25
 ---&gt; b85b4246e9f8

Successfully built b85b4246e9f8
Successfully tagged compose_app:latest
WARNING: Image <span class="hljs-keyword">for</span> service app was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
Creating compose_redis_1 ... done
Creating compose_app_1   ... done
Attaching to compose_redis_1, compose_app_1
redis_1  | <span class="hljs-type">1</span>:C <span class="hljs-number">08</span> Jul <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">21.851</span> # Warning: no config file specified, <span class="hljs-built_in">using</span> the default config. In order to specify a config file use redis-server /path/to/redis.conf
redis_1  |                 <span class="hljs-type">_</span>.<span class="hljs-keyword">_</span>
redis_1  |            <span class="hljs-type">_</span>.-``__ ''-.<span class="hljs-keyword">_</span>
redis_1  |       <span class="hljs-type">_</span>.-``    `.  `<span class="hljs-keyword">_</span>.  ''-.<span class="hljs-keyword">_</span>           Redis <span class="hljs-number">3.2</span><span class="hljs-number">.12</span> (<span class="hljs-number">00000000</span>/<span class="hljs-number">0</span>) <span class="hljs-number">64</span> bit
redis_1  |   <span class="hljs-type">.-`` .-```

.  

```\/    _</span>.,<span class="hljs-keyword">_</span> ''-.<span class="hljs-keyword">_</span>
redis_1  |  <span class="hljs-type">(    '      ,       .-`  | `,    )     Running</span> <span class="hljs-built_in">in</span> standalone mode
redis_1  |  <span class="hljs-type">|`-._</span>`-...-` __...-.``-.<span class="hljs-keyword">_</span>|<span class="hljs-type">'` _</span>.-'|     <span class="hljs-type">Port</span>: <span class="hljs-number">6379</span>
redis_1  |  <span class="hljs-type">|    `-._</span>   `.<span class="hljs-keyword">_</span>    /     <span class="hljs-keyword">_</span>.-'    |     <span class="hljs-type">PID</span>: <span class="hljs-number">1</span>
redis_1  |   <span class="hljs-type">`-._</span>    `-.<span class="hljs-keyword">_</span>  `-./  <span class="hljs-keyword">_</span>.-'    <span class="hljs-keyword">_</span>.-'
redis_1  |  <span class="hljs-type">|`-._</span>`-.<span class="hljs-keyword">_</span>    `-.__.-'    <span class="hljs-keyword">_</span>.-'<span class="hljs-keyword">_</span>.-'|
<span class="hljs-type">redis_1</span>  |  <span class="hljs-type">|    `-._</span>`-.<span class="hljs-keyword">_</span>        <span class="hljs-keyword">_</span>.-'<span class="hljs-keyword">_</span>.-'    |           <span class="hljs-type">http</span>://redis.io
redis_1  |   <span class="hljs-type">`-._</span>    `-.<span class="hljs-keyword">_</span>`-.__.-'<span class="hljs-keyword">_</span>.-'    <span class="hljs-keyword">_</span>.-'
redis_1  |  <span class="hljs-type">|`-._</span>`-.<span class="hljs-keyword">_</span>    `-.__.-'    <span class="hljs-keyword">_</span>.-'<span class="hljs-keyword">_</span>.-'|
<span class="hljs-type">redis_1</span>  |  <span class="hljs-type">|    `-._</span>`-.<span class="hljs-keyword">_</span>        <span class="hljs-keyword">_</span>.-'<span class="hljs-keyword">_</span>.-'    |
<span class="hljs-type">redis_1</span>  |   <span class="hljs-type">`-._</span>    `-.<span class="hljs-keyword">_</span>`-.__.-'<span class="hljs-keyword">_</span>.-'    <span class="hljs-keyword">_</span>.-'
redis_1  |       <span class="hljs-type">`-._</span>    `-.__.-'    <span class="hljs-keyword">_</span>.-'
redis_1  |           <span class="hljs-type">`-._</span>        <span class="hljs-keyword">_</span>.-'
redis_1  |               <span class="hljs-type">`-.__</span>.-'
redis_1  |
<span class="hljs-type">redis_1</span>  | <span class="hljs-type">1</span>:M <span class="hljs-number">08</span> Jul <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">21.852</span> # WARNING: The TCP backlog setting of <span class="hljs-number">511</span> cannot be enforced because /proc/sys/net/core/somaxconn is <span class="hljs-built_in">set</span> to the lower value of <span class="hljs-number">128.</span>
redis_1  | <span class="hljs-type">1</span>:M <span class="hljs-number">08</span> Jul <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">21.852</span> # Server started, Redis version <span class="hljs-number">3.2</span><span class="hljs-number">.12</span>
redis_1  | <span class="hljs-type">1</span>:M <span class="hljs-number">08</span> Jul <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">21.852</span> # WARNING overcommit_memory is <span class="hljs-built_in">set</span> to <span class="hljs-number">0</span>! Background save may <span class="hljs-built_in">fail</span> under low memory condition. To <span class="hljs-built_in">fix</span> this issue add 'vm.overcommit_memory = <span class="hljs-number">1</span>' to /etc/sysctl.conf and <span class="hljs-keyword">then</span> reboot or run the command 'sysctl vm.overcommit_memory=<span class="hljs-number">1</span>' <span class="hljs-keyword">for</span> this to take effect.
redis_1  | <span class="hljs-type">1</span>:M <span class="hljs-number">08</span> Jul <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">21.852</span> # WARNING you have <span class="hljs-keyword">Transparent</span> Huge Pages (THP) support enabled <span class="hljs-built_in">in</span> your kernel. This will create latency and memory usage issues <span class="hljs-built_in">with</span> Redis. To <span class="hljs-built_in">fix</span> this issue run the command 'echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled' <span class="hljs-built_in">as</span> root, and add it to your /etc/rc.local <span class="hljs-built_in">in</span> order to retain the setting <span class="hljs-built_in">after</span> a reboot. Redis must be restarted <span class="hljs-built_in">after</span> THP is disabled.
redis_1  | <span class="hljs-type">1</span>:M <span class="hljs-number">08</span> Jul <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">21.852</span> * The server is now ready to accept connections on port <span class="hljs-number">6379</span>
app_1    |  <span class="hljs-type">* Serving</span> Flask app <span class="hljs-string">"app"</span> (<span class="hljs-built_in">lazy</span> loading)
app_1    |  <span class="hljs-type">* Environment</span>: production
app_1    |    <span class="hljs-type">WARNING</span>: Do not use the development server <span class="hljs-built_in">in</span> a production environment.
app_1    |    <span class="hljs-type">Use</span> a production WSGI server instead.
app_1    |  <span class="hljs-type">* Debug</span> mode: on
app_1    |  <span class="hljs-type">* Running</span> on http://<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">5000</span>/ (Press CTRL+C to quit)
app_1    |  <span class="hljs-type">* Restarting</span> <span class="hljs-built_in">with</span> stat
app_1    |  <span class="hljs-type">* Debugger</span> is active!
app_1    |  <span class="hljs-type">* Debugger</span> PIN: <span class="hljs-number">170</span><span class="hljs-number">-528</span><span class="hljs-number">-240</span>

</pre><p>The current example will increment view counter in Redis. Open the&nbsp;<a href="http://127.0.0.1:5000/" target="_blank">following url</a>&nbsp;in your web browser and check it.</p><p>How to use docker-compose is a topic for a separate tutorial. To get started, you can play with some images from Docker Hub. If you want to create your own images, follow the best practices listed above. The only thing I can add in terms of using docker-compose is that you should&nbsp;<strong>always give explicit names to your volumes</strong>&nbsp;in docker-compose.yml (if the image has volumes). This simple rule will save you from an issue in the future when you’ll be inspecting your volumes.</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-keyword">version</span>: <span class="hljs-string">'3.6'</span>
service<span class="hljs-variable">s:</span>
  ...
  <span class="hljs-keyword">redi</span><span class="hljs-variable">s:</span>
    image: <span class="hljs-keyword">redi</span><span class="hljs-variable">s:3</span>.<span class="hljs-number">2</span>-alpine
    volume<span class="hljs-variable">s:</span>
      - redis_dat<span class="hljs-variable">a:</span>/data
volume<span class="hljs-variable">s:</span>
  redis_dat<span class="hljs-variable">a:</span>

</pre><p>In this case,&nbsp;<strong>redis_data</strong>&nbsp;will be the name inside the docker-compose.yml file; for the real volume name, it will be prepended with project name prefix.</p><p>To see volumes, run:</p><pre class="ql-syntax" spellcheck="false">docker <span class="hljs-keyword">volume</span><span class="bash"> ls
</span>
</pre><p>Console output:</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-built_in">DRIVER</span>              VOLUME <span class="hljs-built_in">NAME</span>
<span class="hljs-built_in">local</span>               apptest_redis_data

</pre><p>Without an explicit volume name, there will be a UUID. Here’s an example from my local machine:</p><pre class="ql-syntax" spellcheck="false"><span class="hljs-built_in">DRIVER</span>              VOLUME <span class="hljs-built_in">NAME</span>
<span class="hljs-built_in">local</span>               ec1a5ac0a2106963c2129151b27cb032ea5bb7c4bd6fe94d9dd22d3e72b2a41b
<span class="hljs-built_in">local</span>               f3a664ce353ba24dd43d8f104871594de6024ed847054422bbdd362c5033fc4c
<span class="hljs-built_in">local</span>               f81a397776458e62022610f38a1bfe50dd388628e2badc3d3a2553bb08a5467f
<span class="hljs-built_in">local</span>               f84228acbf9c5c06da7be2197db37f2e3da34b7e8277942b10900f77f78c9e64
<span class="hljs-built_in">local</span>               f9958475a011982b4dc8d8d8209899474ea4ec2c27f68d1a430c94bcc1eb0227
<span class="hljs-built_in">local</span>               ff14e0e20d70aa57e62db0b813db08577703ff1405b2a90ec88f48eb4cdc7c19
<span class="hljs-built_in">local</span>               polls_pg_data
<span class="hljs-built_in">local</span>               polls_public_files
<span class="hljs-built_in">local</span>               polls_redis_data
<span class="hljs-built_in">local</span>               projectdev_pg_data
<span class="hljs-built_in">local</span>               projectdev_redis_data

</pre><h1>Docker way</h1><p>Docker has some restrictions and requirements, depending on the architecture of your system (applications that you pack into containers). You can ignore these requirements or find some workarounds, but in this case, you won’t get all the benefits of using Docker. My strong advice is to follow these recommendations:</p><ul><li><strong>1 application = 1 container</strong>.</li><li>Run the process in the&nbsp;<strong>foreground</strong>&nbsp;(don’t use systemd, upstart or any other similar tools).</li><li><strong>Keep data out of containers</strong>&nbsp;– use volumes.</li><li><strong>Do not use SSH</strong>&nbsp;(if you need to step into container, you can use the docker exec command).</li><li><strong>Avoid manual configurations</strong>&nbsp;(or actions) inside container.</li></ul><h2>Conclusion</h2><p>To summarize this tutorial, alongside with IDE and Git, Docker has become a must-have developer tool. It’s a production-ready tool with a rich and mature infrastructure.</p><p>Docker can be used on all types of projects, regardless of size and complexity. In the beginning, you can start with&nbsp;<a href="https://docs.docker.com/compose/overview/" target="_blank">compose</a>&nbsp;and&nbsp;<a href="https://docs.docker.com/engine/swarm/" target="_blank">Swarm</a>. When the project grows, you can migrate to cloud services like&nbsp;<a href="https://aws.amazon.com/containers/" target="_blank">Amazon Container Services</a>&nbsp;or&nbsp;<a href="https://kubernetes.io/" target="_blank">Kubernetes</a>.</p><p>Like standard containers used in cargo transportation, wrapping your code in Docker containers will help you build faster and more efficient CI/CD processes. This is not just another technological trend promoted by a bunch of geeks – it’s a new paradigm that is already being used in the architecture of large companies like&nbsp;<a href="https://blog.docker.com/2017/12/containers-at-paypal/" target="_blank">PayPal</a>,&nbsp;<a href="https://blog.docker.com/2017/04/visa-inc-gains-speed-operational-efficiency-docker-enterprise-edition/" target="_blank">Visa</a>,&nbsp;<a href="https://www.docker.com/customers/swisscom-goes-400vms-20vms-docker" target="_blank">Swisscom</a>,&nbsp;<a href="https://www.docker.com/customers/ge-uses-docker-enable-self-service-their-developers" target="_blank">General Electric</a>,&nbsp;<a href="https://www.docker.com/customers/docker-datacenter-delivers-splunks-house-demos" target="_blank">Splink</a>, etc.</p><p>The article is written by Roman Gaponov. This&nbsp;<a href="https://djangostars.com/blog/what-is-docker-and-how-to-use-it-with-python/" target="_blank">docker tutorial</a>&nbsp;is originally published in Django Stars blog.</p><p>You can also visit our content platform&nbsp;<a href="https://producttribe.com/" target="_blank">Product Tribe</a>&nbsp;created by professionals for those involved in a product development and growth processes.</p><p><em>Originally published by Django Stars at&nbsp;</em><a href="https://dev.to" target="_blank"><em>https://dev.to</em></a></p><h3>Learn more</h3><p>Docker Mastery: The Complete Toolset From a Docker Captain</p><p>☞&nbsp;<a href="http://school.edusavecoupon.net/p/r18lJJ_1Te" target="_blank">http://school.edusavecoupon.net/p/r18lJJ_1Te</a></p><p>Docker and Kubernetes: The Complete Guide</p><p>☞&nbsp;<a href="http://school.edusavecoupon.net/p/7bXEiVS7Q" target="_blank">http://school.edusavecoupon.net/p/7bXEiVS7Q</a></p><p>Docker Crash Course for busy DevOps and Developers</p><p>☞&nbsp;<a href="http://school.edusavecoupon.net/p/Sy8T4CfkM" target="_blank">http://school.edusavecoupon.net/p/Sy8T4CfkM</a></p><p>Python for Data Science</p><p>☞&nbsp;<a href="http://school.edusavecoupon.net/p/hjPRr41Uz" target="_blank">http://school.edusavecoupon.net/p/hjPRr41Uz</a></p><p>Learn Python3 Programming</p><p>☞&nbsp;<a href="http://school.edusavecoupon.net/p/tQk4vU8hJ" target="_blank">http://school.edusavecoupon.net/p/tQk4vU8hJ</a></p><p>Python For Beginners: Learn Python With Hands-On Examples</p><p>☞&nbsp;<a href="http://school.edusavecoupon.net/p/NTRHNxL5y" target="_blank">http://school.edusavecoupon.net/p/NTRHNxL5y</a></p></p> <!----> <div class="pt-10"></div></div>
</html>